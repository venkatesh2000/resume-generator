{"ast":null,"code":"'use strict';\n\nconst ops = require('../ops');\n\nconst PDFImage = require('./pdf');\n\nconst PDF = require('../object');\n\nmodule.exports = async function (img, doc, parent, opts) {\n  if (!img) {\n    throw TypeError('No image provided');\n  }\n\n  if (!doc._currentContent) {\n    await doc._startPage();\n  }\n\n  const aliases = doc._useXObject(img);\n\n  const _cursor = parent._cursor;\n  let renderWidth, renderHeight;\n\n  if (opts.width && opts.height) {\n    renderWidth = opts.width;\n    renderHeight = opts.height;\n  } else if (opts.width) {\n    renderWidth = opts.width;\n    renderHeight = img.height * (opts.width / img.width);\n  } else if (opts.height) {\n    renderHeight = opts.height;\n    renderWidth = img.width * (opts.height / img.height);\n  } else {\n    renderWidth = Math.min(img.width, _cursor.width);\n    renderHeight = img.height * (renderWidth / img.width);\n\n    if (renderHeight > _cursor.height) {\n      renderHeight = _cursor.height;\n      renderWidth = img.width * (renderHeight / img.height);\n    }\n  }\n\n  let x = _cursor.x;\n  let y = _cursor.y;\n\n  if (opts.wrap === false) {\n    if (opts.x !== undefined && opts.x !== null) {\n      x = opts.x;\n    }\n\n    if (opts.y !== undefined && opts.y !== null) {\n      y = opts.y;\n    }\n  } else {\n    _cursor.y -= renderHeight;\n  }\n\n  y -= renderHeight;\n\n  switch (opts.align) {\n    case 'right':\n      x += _cursor.width - renderWidth;\n      break;\n\n    case 'center':\n      x += (_cursor.width - renderWidth) / 2;\n      break;\n\n    case 'left':\n    default:\n      break;\n  }\n\n  if (img instanceof PDFImage) {\n    // in percent\n    renderWidth /= img.width;\n    renderHeight /= img.height;\n  }\n\n  let chunk = ops.q() + ops.cm(renderWidth, 0, 0, renderHeight, x, y);\n\n  for (const alias of aliases) {\n    chunk += ops.Do(alias);\n  }\n\n  chunk += ops.Q();\n\n  if (opts.link) {\n    doc._annotations.push(new PDF.Dictionary({\n      Type: 'Annot',\n      Subtype: 'Link',\n      Rect: new PDF.Array([x, y, x + renderWidth, y + renderHeight]),\n      Border: new PDF.Array([0, 0, 0]),\n      A: new PDF.Dictionary({\n        Type: 'Action',\n        S: 'URI',\n        URI: new PDF.String(opts.link)\n      })\n    }));\n  }\n\n  if (opts.goTo) {\n    doc._annotations.push(new PDF.Dictionary({\n      Type: 'Annot',\n      Subtype: 'Link',\n      Rect: new PDF.Array([x, y, x + renderWidth, y + renderHeight]),\n      Border: new PDF.Array([0, 0, 0]),\n      A: new PDF.Dictionary({\n        S: 'GoTo',\n        D: new PDF.String(opts.goTo)\n      })\n    }));\n  }\n\n  if (opts.destination) {\n    doc._destinations.set(opts.destination, new PDF.Array([doc._currentPage.toReference(), new PDF.Name('XYZ'), _cursor.x, _cursor.y + renderHeight, null]));\n  }\n\n  await doc._write(chunk);\n};","map":{"version":3,"sources":["/mnt/c/Users/Venkatesh/Documents/6th Sem/Web Dev/project/resume-generator/node_modules/pdfjs/lib/image/render.js"],"names":["ops","require","PDFImage","PDF","module","exports","img","doc","parent","opts","TypeError","_currentContent","_startPage","aliases","_useXObject","_cursor","renderWidth","renderHeight","width","height","Math","min","x","y","wrap","undefined","align","chunk","q","cm","alias","Do","Q","link","_annotations","push","Dictionary","Type","Subtype","Rect","Array","Border","A","S","URI","String","goTo","D","destination","_destinations","set","_currentPage","toReference","Name","_write"],"mappings":"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","sourcesContent":["'use strict'\n\nconst ops = require('../ops')\nconst PDFImage = require('./pdf')\nconst PDF = require('../object')\n\nmodule.exports = async function(img, doc, parent, opts) {\n  if (!img) {\n    throw TypeError('No image provided')\n  }\n\n  if (!doc._currentContent) {\n    await doc._startPage()\n  }\n\n  const aliases = doc._useXObject(img)\n\n  const _cursor = parent._cursor\n\n  let renderWidth, renderHeight\n  if (opts.width && opts.height) {\n    renderWidth  = opts.width\n    renderHeight = opts.height\n  } else if(opts.width) {\n    renderWidth  = opts.width\n    renderHeight = img.height * (opts.width / img.width)\n  } else if (opts.height) {\n    renderHeight = opts.height\n    renderWidth  = img.width * (opts.height / img.height)\n  } else {\n    renderWidth  = Math.min(img.width, _cursor.width)\n    renderHeight = img.height * (renderWidth / img.width)\n\n    if (renderHeight > _cursor.height) {\n      renderHeight = _cursor.height\n      renderWidth  = img.width * (renderHeight / img.height)\n    }\n  }\n\n  let x = _cursor.x\n  let y = _cursor.y\n\n  if (opts.wrap === false) {\n    if (opts.x !== undefined && opts.x !== null) {\n      x = opts.x\n    }\n\n    if (opts.y !== undefined && opts.y !== null) {\n      y = opts.y\n    }\n  } else {\n    _cursor.y -= renderHeight\n  }\n\n  y -= renderHeight\n\n  switch (opts.align) {\n    case 'right':\n      x += _cursor.width - renderWidth\n      break\n    case 'center':\n      x += (_cursor.width - renderWidth) / 2\n      break\n    case 'left':\n    default:\n      break\n  }\n\n  if (img instanceof PDFImage) {\n    // in percent\n    renderWidth /= img.width\n    renderHeight /= img.height\n  }\n\n  let chunk = ops.q()\n            + ops.cm(renderWidth, 0, 0, renderHeight, x, y)\n\n  for (const alias of aliases) {\n    chunk += ops.Do(alias)\n  }\n\n  chunk +=  ops.Q()\n\n  if (opts.link) {\n    doc._annotations.push(new PDF.Dictionary({\n      Type: 'Annot',\n      Subtype: 'Link',\n      Rect: new PDF.Array([x, y, x + renderWidth, y + renderHeight]),\n      Border: new PDF.Array([0, 0, 0]),\n      A: new PDF.Dictionary({\n        Type: 'Action',\n        S: 'URI',\n        URI: new PDF.String(opts.link),\n      }),\n    }))\n  }\n  if (opts.goTo) {\n    doc._annotations.push(new PDF.Dictionary({\n      Type: 'Annot',\n      Subtype: 'Link',\n      Rect: new PDF.Array([x, y, x + renderWidth, y + renderHeight]),\n      Border: new PDF.Array([0, 0, 0]),\n      A: new PDF.Dictionary({\n        S: 'GoTo',\n        D: new PDF.String(opts.goTo),\n      }),\n    }))\n  }\n  if (opts.destination) {\n    doc._destinations.set(opts.destination, new PDF.Array([\n      doc._currentPage.toReference(),\n      new PDF.Name('XYZ'),\n      _cursor.x,\n      _cursor.y + renderHeight,\n      null,\n    ]))\n  }\n\n  await doc._write(chunk)\n}\n"]},"metadata":{},"sourceType":"script"}